!function e(t,r,n){function a(i,s){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!s&&c)return c(i,!0);if(o)return o(i,!0);var l=new Error("Cannot find module '"+i+"'");throw l.code="MODULE_NOT_FOUND",l}var u=r[i]={exports:{}};t[i][0].call(u.exports,function(e){var r=t[i][1][e];return a(r?r:e)},u,u.exports,e,t,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)a(n[i]);return a}({1:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),i(t,[{key:"numberDaysOfYearXXX",value:function(e){return!(e>365)&&(e<10?"00"+e:e<100?"0"+e:e)}},{key:"convertDateToNumberDay",value:function(e){var t=new Date(e),r=new Date(t.getFullYear(),0,0),n=t-r,a=864e5,o=Math.floor(n/a);return t.getFullYear()+"-"+this.numberDaysOfYearXXX(o)}},{key:"convertNumberDayToDate",value:function(e){var t=/(\d{4})(-)(\d{3})/,r=t.exec(e),n=new Date(r[1]),a=n.getTime()+1e3*r[3]*60*60*24,o=new Date(a),i=o.getMonth()+1,s=o.getDate(),c=o.getFullYear();return(s<10?"0"+s:s)+"."+(i<10?"0"+i:i)+"."+c}},{key:"formatDate",value:function(e){var t=new Date(e),r=t.getFullYear(),n=t.getMonth()+1,a=t.getDate();return r+"-"+(n<10?"0"+n:n)+" - "+(a<10?"0"+a:a)}},{key:"getCurrentDate",value:function(){var e=new Date;return this.formatDate(e)}},{key:"getDateLastThreeMonth",value:function(){var e=new Date,t=(new Date).getFullYear(),r=new Date(e.getFullYear(),0,0),n=e-r,a=864e5,o=Math.floor(n/a);return o-=90,o<0&&(t-=1,o=365-o),t+"-"+this.numberDaysOfYearXXX(o)}},{key:"getCurrentSummerDate",value:function(){var e=(new Date).getFullYear(),t=this.convertDateToNumberDay(e+"-06-01"),r=this.convertDateToNumberDay(e+"-08-31");return[t,r]}},{key:"getCurrentSpringDate",value:function(){var e=(new Date).getFullYear(),t=this.convertDateToNumberDay(e+"-03-01"),r=this.convertDateToNumberDay(e+"-05-31");return[t,r]}},{key:"getLastSummerDate",value:function(){var e=(new Date).getFullYear()-1,t=this.convertDateToNumberDay(e+"-06-01"),r=this.convertDateToNumberDay(e+"-08-31");return[t,r]}},{key:"getFirstDateCurYear",value:function(){return(new Date).getFullYear()+" - 001"}},{key:"timestampToDateTime",value:function(e){var t=new Date(1e3*e);return t.toLocaleString().replace(/,/,"").replace(/:\w+$/,"")}},{key:"timestampToTime",value:function(e){var t=new Date(1e3*e),r=t.getHours(),n=t.getMinutes();return(r<10?"0"+r:r)+" : "+(n<10?"0"+n:n)+" "}},{key:"getNumberDayInWeekByUnixTime",value:function(e){var t=new Date(1e3*e);return t.getDay()}},{key:"getDayNameOfWeekByDayNumber",value:function(e){var t={0:"Sun",1:"Mon",2:"Tue",3:"Wed",4:"Thu",5:"Fri",6:"Sat"};return t[e]}},{key:"getMonthNameByMonthNumber",value:function(e){if("number"!=typeof e||e<=0&&e>=12)return null;var t={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"};return t[e]}},{key:"compareDatesWithToday",value:function(e){return e.toLocaleDateString()===(new Date).toLocaleDateString()}},{key:"convertStringDateMMDDYYYHHToDate",value:function(e){var t=/(\d{2})(\.{1})(\d{2})(\.{1})(\d{4})/,r=t.exec(e);return 6===r.length?new Date(r[5]+"-"+r[3]+"-"+r[1]):new Date}},{key:"getTimeDateHHMMMonthDay",value:function(){var e=new Date;return(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+" "+this.getMonthNameByMonthNumber(e.getMonth())+" "+e.getDate()}}]),t}(Date);r["default"]=s},{}],2:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(r,"__esModule",{value:!0});var a=function o(){n(this,o),this.mapWidgets={"widget-1-left-blue":{code:"script.js?type=left&schema=blue&id=1",schema:"blue"},"widget-2-left-blue":{code:"script.js?type=left&schema=blue&id=2",schema:"blue"},"widget-3-left-blue":{code:"script.js?type=left&schema=blue&id=3",schema:"blue"},"widget-4-left-blue":{code:"script.js?type=left&schema=blue&id=4",schema:"blue"},"widget-5-right-blue":{code:"script.js?type=right&schema=blue&id=5",schema:"blue"},"widget-6-right-blue":{code:"script.js?type=right&schema=blue&id=6",schema:"blue"},"widget-7-right-blue":{code:"script.js?type=right&schema=blue&id=7",schema:"blue"},"widget-8-right-blue":{code:"script.js?type=right&schema=blue&id=8",schema:"blue"},"widget-9-right-blue":{code:"script.js?type=right&schema=blue&id=9",schema:"blue"},"widget-1-left-brown":{code:"script.js?type=left&schema=brown&id=1",schema:"brown"},"widget-2-left-brown":{code:"script.js?type=left&schema=brown&id=2",schema:"brown"},"widget-3-left-brown":{code:"script.js?type=left&schema=brown&id=3",schema:"brown"},"widget-4-left-brown":{code:"script.js?type=left&schema=brown&id=4",schema:"brown"},"widget-5-right-brown":{code:"script.js?type=left&schema=brown&id=5",schema:"brown"},"widget-6-right-brown":{code:"script.js?type=left&schema=brown&id=6",schema:"brown"},"widget-7-right-brown":{code:"script.js?type=right&schema=brown&id=7",schema:"brown"},"widget-8-right-brown":{code:"script.js?type=right&schema=brown&id=8",schema:"brown"},"widget-9-right-brown":{code:"script.js?type=right&schema=brown&id=9",schema:"brown"},"widget-1-left-white":{code:"script.js?type=left&schema=white&id=1",schema:"none"},"widget-2-left-white":{code:"script.js?type=left&schema=white&id=2",schema:"none"},"widget-3-left-white":{code:"script.js?type=left&schema=white&id=3",schema:"none"},"widget-4-left-white":{code:"script.js?type=left&schema=white&id=4",schema:"none"}}};r["default"]=a},{}],3:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=e("./custom-date"),l=n(c),u=function(e){function t(e){a(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.params=e,r.temperaturePolygon=d3.line().x(function(e){return e.x}).y(function(e){return e.y}),r}return i(t,e),s(t,[{key:"prepareData",value:function(){var e=0,t=[];return this.params.data.forEach(function(r){t.push({x:e,date:e,maxT:r.max,minT:r.min}),e+=1}),t}},{key:"makeSVG",value:function(){return d3.select(this.params.id).append("svg").attr("class","axis").attr("width",this.params.width).attr("height",this.params.height).attr("fill",this.params.colorPolilyne).style("stroke","#ffffff")}},{key:"getMinMaxDate",value:function(e){var t={maxDate:0,minDate:1e4};return e.forEach(function(e){t.maxDate<=e.date&&(t.maxDate=e.date),t.minDate>=e.date&&(t.minDate=e.date)}),t}},{key:"getMinMaxTemperature",value:function(e){var t={min:100,max:0};return e.forEach(function(e){t.min>=e.minT&&(t.min=e.minT),t.max<=e.maxT&&(t.max=e.maxT)}),t}},{key:"getMinMaxWeather",value:function(e){var t={min:0,max:0};return e.forEach(function(e){t.min>=e.humidity&&(t.min=e.humidity),t.min>=e.rainfallAmount&&(t.min=e.rainfallAmount),t.max<=e.humidity&&(t.max=e.humidity),t.max<=e.rainfallAmount&&(t.max=e.rainfallAmount)}),t}},{key:"makeAxesXY",value:function(e,t){var r=t.width-2*t.margin,n=t.height-2*t.margin;return this.scaleAxesXYTemperature(e,r,n,t)}},{key:"scaleAxesXYTemperature",value:function(e,t,r,n){var a=this.getMinMaxDate(e),o=a.maxDate,i=a.minDate,s=this.getMinMaxTemperature(e),c=s.min,l=s.max,u=d3.scaleTime().domain([new Date(i),new Date(o)]).range([0,t]),d=d3.scaleLinear().domain([l+5,c-5]).range([0,r]),m=[];return e.forEach(function(e){m.push({x:u(e.date)+n.offsetX,maxT:d(e.maxT)+n.offsetX,minT:d(e.minT)+n.offsetX})}),{scaleX:u,scaleY:d,data:m}}},{key:"scaleAxesXYWeather",value:function(e,t,r,n){var a=this.getMinMaxDate(e),o=a.maxDate,i=a.minDate,s=this.getMinMaxWeather(e),c=s.min,l=s.max,u=d3.scaleTime().domain([new Date(i),new Date(o)]).range([0,t]),d=d3.scaleLinear().domain([l,c]).range([0,r]),m=[];return e.forEach(function(e){m.push({x:u(e.date)+n,humidity:d(e.humidity)+n,rainfallAmount:d(e.rainfallAmount)+n,color:e.color})}),{scaleX:u,scaleY:d,data:m}}},{key:"makePolyline",value:function(e,t,r,n){var a=[];return e.forEach(function(e){a.push({x:r(e.date)+t.offsetX,y:n(e.maxT)+t.offsetY})}),e.reverse().forEach(function(e){a.push({x:r(e.date)+t.offsetX,y:n(e.minT)+t.offsetY})}),a.push({x:r(e[e.length-1].date)+t.offsetX,y:n(e[e.length-1].maxT)+t.offsetY}),a}},{key:"drawPolyline",value:function(e,t){e.append("g").append("path").style("stroke-width",this.params.strokeWidth).attr("d",this.temperaturePolygon(t)).style("stroke",this.params.colorPolilyne).style("fill",this.params.colorPolilyne).style("opacity",1)}},{key:"drawLabelsTemperature",value:function(e,t,r){t.forEach(function(t,n,a){e.append("text").attr("x",t.x).attr("y",t.maxT-2-r.offsetX/2).attr("text-anchor","middle").style("font-size",r.fontSize).style("stroke",r.fontColor).style("fill",r.fontColor).text(r.data[n].max+"°"),e.append("text").attr("x",t.x).attr("y",t.minT+7+r.offsetY/2).attr("text-anchor","middle").style("font-size",r.fontSize).style("stroke",r.fontColor).style("fill",r.fontColor).text(r.data[n].min+"°")})}},{key:"render",value:function(){var e=this.makeSVG(),t=this.prepareData(),r=this.makeAxesXY(t,this.params),n=r.scaleX,a=r.scaleY,o=r.data,i=this.makePolyline(t,this.params,n,a);this.drawPolyline(e,i),this.drawLabelsTemperature(e,o,this.params)}}]),t}(l["default"]);r["default"]=u},{"./custom-date":1}],4:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./generator-widget"),o=n(a);document.addEventListener("DOMContentLoaded",function(){var e=new o["default"],t=document.getElementById("frm-landing-widget"),r=document.getElementById("popup"),n=document.getElementById("popup-close"),a=document.getElementById("js-code-generate"),i=document.getElementById("copy-js-code");t.addEventListener("click",function(t){if(t.target.id&&(t.preventDefault(),console.log(e.mapWidgets[t.target.id].code),a.value=e.mapWidgets[t.target.id].code,!r.classList.contains("popup--visible")))switch(r.classList.add("popup--visible"),e.mapWidgets[t.target.id].schema){case"blue":r.classList.contains("popup--blue")||r.classList.add("popup--blue"),r.classList.contains("popup--brown")&&r.classList.remove("popup--brown");break;case"brown":r.classList.contains("popup--brown")||r.classList.add("popup--brown"),r.classList.contains("popup--blue")&&r.classList.remove("popup--blue");break;case"none":r.classList.contains("popup--brown")&&r.classList.remove("popup--brown"),r.classList.contains("popup--blue")&&r.classList.remove("popup--blue")}}),n.addEventListener("click",function(){r.classList.contains("popup--visible")&&r.classList.remove("popup--visible")}),i.addEventListener("click",function(e){e.preventDefault(),a.select();try{var t=document.execCommand("copy"),r=t?"successful":"unsuccessful";console.log("Copy email command was "+r)}catch(n){console.log("Ошибка копирования "+n.errLogToConsole)}window.getSelection().removeAllRanges()}),i.disabled=!document.queryCommandSupported("copy")})},{"./generator-widget":2}],5:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var a=e("./weather-widget"),o=n(a),i=e("./popup");n(i);document.addEventListener("DOMContentLoaded",function(){var e="";e=window.location.search?window.location.search:"?q=London";var t="http://api.openweathermap.org",r={cityName:"Moscow",lang:"en",appid:"2d90837ddbaeda36ab487f257829b667",units:"metric",textUnitTemp:String.fromCodePoint(176)},n={cityName:document.querySelectorAll(".widget-left-menu__header"),temperature:document.querySelectorAll(".weather-left-card__number"),naturalPhenomenon:document.querySelectorAll(".weather-left-card__means"),windSpeed:document.querySelectorAll(".weather-left-card__wind"),mainIconWeather:document.querySelectorAll(".weather-left-card__img"),calendarItem:document.querySelectorAll(".calendar__item"),graphic:document.getElementById("graphic"),cityName2:document.querySelectorAll(".widget-right__title"),temperature2:document.querySelectorAll(".weather-right__temperature"),temperatureFeels:document.querySelectorAll(".weather-right__feels"),temperatureMin:document.querySelectorAll(".weather-right-card__temperature-min"),temperatureMax:document.querySelectorAll(".weather-right-card__temperature-max"),naturalPhenomenon2:document.querySelectorAll(".widget-right__description"),windSpeed2:document.querySelectorAll(".weather-right__wind-speed"),mainIconWeather2:document.querySelectorAll(".weather-right__icon"),humidity:document.querySelectorAll(".weather-right__humidity"),pressure:document.querySelectorAll(".weather-right__pressure"),dateReport:document.querySelectorAll(".widget-right__date")},a={urlWeatherAPI:t+"/data/2.5/weather"+e+"&units="+r.units+"&appid="+r.appid,paramsUrlForeDaily:t+"/data/2.5/forecast/daily"+e+"&units="+r.units+"&cnt=8&appid="+r.appid,windSpeed:"data/wind-speed-data.json",windDirection:"data/wind-direction-data.json",clouds:"data/clouds-data.json",naturalPhenomenon:"data/natural-phenomenon-data.json"},i=new o["default"](r,n,a);i.render()})},{"./popup":4,"./weather-widget":6}],6:[function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(r,"__esModule",{value:!0});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=e("./custom-date"),u=n(l),d=e("./graphic-d3js"),m=n(d),h=function(e){function t(e,r,n){a(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.params=e,i.controls=r,i.urls=n,i.weather={fromAPI:{coord:{lon:"0",lat:"0"},weather:[{id:" ",main:" ",description:" ",icon:" "}],base:" ",main:{temp:0,pressure:" ",humidity:" ",temp_min:" ",temp_max:" "},wind:{speed:0,deg:" "},rain:{},clouds:{all:" "},dt:"",sys:{type:" ",id:" ",message:" ",country:" ",sunrise:" ",sunset:" "},id:" ",name:"Undefined",cod:" "}},i}return i(t,e),c(t,[{key:"httpGet",value:function(e){var t=this;return new Promise(function(r,n){var a=new XMLHttpRequest;a.onload=function(){if(200===a.status)r(JSON.parse(this.response));else{var e=new Error(this.statusText);e.code=this.status,n(t.error)}},a.ontimeout=function(e){n(new Error("Время ожидания обращения к серверу API истекло "+e.type+" "+e.timeStamp.toFixed(2)))},a.onerror=function(e){n(new Error("Ошибка обращения к серверу "+e))},a.open("GET",e,!0),a.send(null)})}},{key:"getWeatherFromApi",value:function(){var e=this;this.httpGet(this.urls.urlWeatherAPI).then(function(t){e.weather.fromAPI=t,e.httpGet(e.urls.naturalPhenomenon).then(function(t){e.weather.naturalPhenomenon=t[e.params.lang].description,e.httpGet(e.urls.windSpeed).then(function(t){e.weather.windSpeed=t[e.params.lang],e.httpGet(e.urls.paramsUrlForeDaily).then(function(t){e.weather.forecastDaily=t,e.httpGet(e.urls.windDirection).then(function(t){e.weather.windDirection=t[e.params.lang],e.parseDataFromServer()},function(t){console.log("Возникла ошибка "+t),e.parseDataFromServer()})},function(t){console.log("Возникла ошибка "+t),e.parseDataFromServer()})},function(t){console.log("Возникла ошибка "+t),e.parseDataFromServer()})},function(t){console.log("Возникла ошибка "+t),e.parseDataFromServer()})},function(t){console.log("Возникла ошибка "+t),e.parseDataFromServer()})}},{key:"getParentSelectorFromObject",value:function(e,t,r,n){for(var a in e)if("object"===s(e[a][r])&&null==n){if(t>=e[a][r][0]&&t<e[a][r][1])return a}else if(null!=n&&t>=e[a][r]&&t<e[a][n])return a}},{key:"parseDataFromServer",value:function(){var e=this.weather;if("Undefined"===e.fromAPI.name||"404"===e.fromAPI.cod)return void console.log("Данные от сервера не получены");var t={cloudiness:" ",dt:" ",cityName:" ",icon:" ",temperature:" ",temperatureMin:" ",temperatureMAx:" ",pressure:" ",humidity:" ",sunrise:" ",sunset:" ",coord:" ",wind:" ",weather:" "},r=parseInt(e.fromAPI.main.temp.toFixed(0),10)+0;t.cityName=e.fromAPI.name+", "+e.fromAPI.sys.country,t.temperature=r,t.temperatureMin=parseInt(e.fromAPI.main.temp_min.toFixed(0),10)+0,t.temperatureMax=parseInt(e.fromAPI.main.temp_max.toFixed(0),10)+0,e.naturalPhenomenon&&(t.weather=e.naturalPhenomenon[e.fromAPI.weather[0].id]),e.windSpeed&&(t.windSpeed="Wind: "+e.fromAPI.wind.speed.toFixed(1)+" m/s "+this.getParentSelectorFromObject(e.windSpeed,e.fromAPI.wind.speed.toFixed(1),"speed_interval"),t.windSpeed2=e.fromAPI.wind.speed.toFixed(1)+" m/s"),e.windDirection&&(t.windDirection=""+this.getParentSelectorFromObject(e.windDirection,e.fromAPI.wind.deg,"deg_interval")),e.clouds&&(t.clouds=""+this.getParentSelectorFromObject(e.clouds,e.fromAPI.clouds.all,"min","max")),t.humidity=e.fromAPI.main.humidity+"%",t.pressure=e.fromAPI.main.pressure+" mb",t.icon=""+e.fromAPI.weather[0].icon,this.renderWidget(t)}},{key:"renderWidget",value:function(e){for(var t in this.controls.cityName)this.controls.cityName.hasOwnProperty(t)&&(this.controls.cityName[t].innerHTML=e.cityName);for(var r in this.controls.temperature)this.controls.temperature.hasOwnProperty(r)&&(this.controls.temperature[r].innerHTML=e.temperature+"<span class='weather-left-card__degree'>"+this.params.textUnitTemp+"</span>");for(var n in this.controls.mainIconWeather)this.controls.mainIconWeather.hasOwnProperty(n)&&(this.controls.mainIconWeather[n].src=this.getURLMainIcon(e.icon,!0),this.controls.mainIconWeather[n].alt="Weather in "+(e.cityName?e.cityName:""));if(e.weather)for(var a in this.controls.naturalPhenomenon)this.controls.naturalPhenomenon.hasOwnProperty(a)&&(this.controls.naturalPhenomenon[a].innerText=e.weather);if(e.windSpeed)for(var o in this.controls.windSpeed)this.controls.windSpeed.hasOwnProperty(o)&&(this.controls.windSpeed[o].innerText=e.windSpeed);for(var i in this.controls.cityName2)this.controls.cityName2.hasOwnProperty(i)&&(this.controls.cityName2[i].innerHTML=e.cityName);for(var s in this.controls.temperature2)this.controls.temperature2.hasOwnProperty(s)&&(this.controls.temperature2[s].innerHTML=e.temperature+"<span>"+this.params.textUnitTemp+"</span>"),this.controls.temperatureFeels.hasOwnProperty(s)&&(this.controls.temperatureFeels[s].innerHTML=e.temperature+"<span>"+this.params.textUnitTemp+"</span>");for(var c in this.controls.temperatureMin)this.controls.temperatureMin.hasOwnProperty(c)&&(this.controls.temperatureMin[c].innerHTML=e.temperature+"<span>"+this.params.textUnitTemp+"</span>");for(var l in this.controls.temperatureMax)this.controls.temperatureMax.hasOwnProperty(l)&&(this.controls.temperatureMax[l].innerHTML=e.temperature+"<span>"+this.params.textUnitTemp+"</span>");if(e.weather)for(var u in this.controls.naturalPhenomenon2)this.controls.naturalPhenomenon2.hasOwnProperty(u)&&(this.controls.naturalPhenomenon2[u].innerText=e.weather);if(e.windSpeed2&&e.windDirection)for(var d in this.controls.windSpeed2)this.controls.windSpeed2.hasOwnProperty(d)&&(this.controls.windSpeed2[d].innerText=e.windSpeed2+" "+e.windDirection);for(var m in this.controls.mainIconWeather2)this.controls.mainIconWeather2.hasOwnProperty(m)&&(this.controls.mainIconWeather2[m].src=this.getURLMainIcon(e.icon,!0),this.controls.mainIconWeather2[m].alt="Weather in "+(e.cityName?e.cityName:""));if(e.humidity)for(var h in this.controls.humidity)this.controls.humidity.hasOwnProperty(h)&&(this.controls.humidity[h].innerText=e.humidity);if(e.pressure)for(var p in this.controls.pressure)this.controls.pressure.hasOwnProperty(p)&&(this.controls.pressure[p].innerText=e.pressure);for(var f in this.controls.dateReport)this.controls.dateReport.hasOwnProperty(f)&&(this.controls.dateReport[f].innerText=this.getTimeDateHHMMMonthDay());this.weather.forecastDaily&&this.prepareDataForGraphic()}},{key:"prepareDataForGraphic",value:function(){var e=[];for(var t in this.weather.forecastDaily.list){var r=this.getDayNameOfWeekByDayNumber(this.getNumberDayInWeekByUnixTime(this.weather.forecastDaily.list[t].dt));e.push({min:Math.round(this.weather.forecastDaily.list[t].temp.min),max:Math.round(this.weather.forecastDaily.list[t].temp.max),day:0!=t?r:"Today",icon:this.weather.forecastDaily.list[t].weather[0].icon,date:this.timestampToDateTime(this.weather.forecastDaily.list[t].dt)})}return this.drawGraphicD3(e)}},{key:"renderIconsDaysOfWeek",value:function(e){var t=this;return e.forEach(function(e,r){t.controls.calendarItem[r].innerHTML=e.day+'<img src="http://openweathermap.org/img/w/'+e.icon+'.png" width="32" height="32" alt="'+e.day+'">',t.controls.calendarItem[r+10].innerHTML=e.day+'<img src="http://openweathermap.org/img/w/'+e.icon+'.png" width="32" height="32" alt="'+e.day+'">',t.controls.calendarItem[r+20].innerHTML=e.day+'<img src="http://openweathermap.org/img/w/'+e.icon+'.png" width="32" height="32" alt="'+e.day+'">'}),e}},{key:"getURLMainIcon",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],r=new Map;return t?"img/"+e+".png":(r.set("01d","01dbw"),r.set("02d","02dbw"),r.set("03d","03dbw"),r.set("03d","03dbw"),r.set("04d","04dbw"),r.set("05d","05dbw"),r.set("06d","06dbw"),r.set("07d","07dbw"),r.set("08d","08dbw"),r.set("09d","09dbw"),r.set("10d","10dbw"),r.set("11d","11dbw"),r.set("13d","13dbw"),r.set("01n","01dbw"),r.set("02n","02dbw"),r.set("03n","03dbw"),r.set("03n","03dbw"),r.set("04n","04dbw"),r.set("05n","05dbw"),r.set("06n","06dbw"),r.set("07n","07dbw"),r.set("08n","08dbw"),r.set("09n","09dbw"),r.set("10n","10dbw"),r.set("11n","11dbw"),r.set("13n","13dbw"),r.get(e)?"img/"+r.get(e)+".png":"http://openweathermap.org/img/w/"+e+".png")}},{key:"drawGraphicD3",value:function(e){this.renderIconsDaysOfWeek(e);var t={id:"#graphic",data:e,offsetX:15,offsetY:10,width:420,height:79,rawData:[],margin:10,colorPolilyne:"#333",fontSize:"12px",fontColor:"#333",strokeWidth:"1px"},r=new m["default"](t);r.render(),t.id="#graphic1",t.colorPolilyne="#DDF730",r=new m["default"](t),r.render(),t.id="#graphic2",t.colorPolilyne="#FEB020",r=new m["default"](t),r.render()}},{key:"drawGraphic",value:function(e){this.renderIconsDaysOfWeek(e);var t=this.controls.graphic.getContext("2d");this.controls.graphic.width=465,this.controls.graphic.height=70,t.fillStyle="#fff",t.fillRect(0,0,600,300),t.font="Oswald-Medium, Arial, sans-seri 14px";var r=55,n=0,a=4,o=64,i=58,s=75;for(t.beginPath(),t.moveTo(r-10,-1*e[n].min*a+o),t.strokeText(e[n].max+"º",r,-1*e[n].max*a+i),t.lineTo(r-10,-1*e[n].max*a+o),n+=1;n<e.length;)r+=55,t.lineTo(r,-1*e[n].max*a+o),t.strokeText(e[n].max+"º",r,-1*e[n].max*a+i),n+=1;for(n-=1,t.lineTo(r+30,-1*e[n].max*a+o),r=55,n=0,t.moveTo(r-10,-1*e[n].min*a+o),t.strokeText(e[n].min+"º",r,-1*e[n].min*a+s),t.lineTo(r-10,-1*e[n].min*a+o),n+=1;n<e.length;)r+=55,t.lineTo(r,-1*e[n].min*a+o),t.strokeText(e[n].min+"º",r,-1*e[n].min*a+s),n+=1;n-=1,t.lineTo(r+30,-1*e[n].min*a+o),t.fillStyle="#333",t.lineTo(r+30,-1*e[n].max*a+o),t.closePath(),t.strokeStyle="#333",t.stroke(),t.fill()}},{key:"render",value:function(){this.getWeatherFromApi()}}]),t}(u["default"]);r["default"]=h},{"./custom-date":1,"./graphic-d3js":3}]},{},[5]);